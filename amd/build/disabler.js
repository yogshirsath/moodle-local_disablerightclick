define(["jquery","core/ajax","core/notification","core/modal_factory","core/modal_events","core/templates"],function(e,t,o,n,i,a){return{init:function(){var i={isOpen:!1,orientation:void 0},d=160,c=[],l=null,r=null,s={SETTINGS:function(e){return t.call([{methodname:"local_disablerightclick_settings",args:{contextid:e}}])[0]},SUPPORT:function(e){return t.call([{methodname:"local_disablerightclick_support",args:{action:e}}])[0]}},p={91:"commandLeft",93:"commandRight",18:"option",73:"I",67:"C",85:"U",74:"J",75:"K",83:"S",69:"E",88:"X",86:"V"};function m(t,o){null==o&&(o=2e3);var n=e("<div class='disabler-toaster toaster-container' style='pointer-events:none;'><lable class='toaster-message'>"+t+"</lable></div>");e("html").append(n),e(n).addClass("show"),setTimeout(function(){e(n).addClass("fade"),setTimeout(function(){e(n).removeClass("fade"),setTimeout(function(){e(n).remove()},300)},o)})}function u(t){1==t&&(console.clear(),l=e("body").detach(),e("head")&&(r=e("head").detach()),0==e("#body-detached-css").length&&e("html").append(e('<style id="body-detached-css">.disabler-toaster.toaster-container {position: fixed;width: 100%;top: 1vw;z-index: 140002;left: 0;opacity: 0;text-align: center;transition: top 0.3s linear, opacity 0.3s linear;display: none;}.disabler-toaster.toaster-container.fade {top: 6vw;opacity: 1;}.disabler-toaster.toaster-container.show {display: block;}.disabler-toaster.toaster-container .toaster-message {padding: 1rem 2rem;color: white;border-radius: 2px;background-color: #424242;}</style>')),m(c.developertoolsopened,5e3)),0==t&&(e("html").append(l),l=null,null!==r&&e("html").append(r))}function f(e,t){var o=!1;return(t=t.trim().split("\n")).forEach(function(t){o||-1!=e.indexOf(t.trim())&&(o=!0)}),o}function h(e,t){if(0!=t.length){var o=window.location.href;if(""==t.allowall||!f(o,t.allowall)){if(t.disablerightclick&&1==t.disablerightclick){if(""!=t.allowrightclick&&f(o,t.allowrightclick))return;e.contextmenu(function(e){m(c.rightclick),e.preventDefault()})}if(t.disablecutcopypaste&&1==t.disablecutcopypaste){if(""!=t.allowcutcopypaste&&f(o,t.allowcutcopypaste))return;var n={};e.on("keydown",function(e){if(n[p[e.keyCode]]="keydown"==e.type,1==e.ctrlKey&&-1!=[65,67,83,86,88].indexOf(e.keyCode)||(n.commandLeft||n.commandRight)&&n.C||(n.commandLeft||n.commandRight)&&n.X||(n.commandLeft||n.commandRight)&&n.V)return m(c.cutcopypaste),void e.preventDefault()}),e.on("keyup",function(e){"keyup"==e.type&&(n[p[e.keyCode]]=!1)})}if(t.disabledevelopertools&&1==t.disabledevelopertools){if(""!=t.allowdevelopertools&&f(o,t.allowdevelopertools))return;!function(e){var t={};e.on("keydown",function(e){if(t[p[e.keyCode]]="keydown"==e.type,123==e.keyCode||1==e.ctrlKey&&1==e.shiftKey&&-1!=[67,73,74].indexOf(e.keyCode)||1==e.ctrlKey&&-1!=[85].indexOf(e.keyCode)||(t.commandLeft||t.commandRight)&&t.option&&t.I||(t.commandLeft||t.commandRight)&&t.option&&t.C||(t.commandLeft||t.commandRight)&&t.option&&t.U||(t.commandLeft||t.commandRight)&&t.option&&t.J||(t.commandLeft||t.commandRight)&&t.option&&t.K||(t.commandLeft||t.commandRight)&&t.option&&t.S||(t.commandLeft||t.commandRight)&&t.option&&t.E)return m(c.developertools),void e.preventDefault()}),e.on("keyup",function(e){"keyup"==e.type&&(t[p[e.keyCode]]=!1)}),setInterval(function(){var e=window.outerWidth-window.innerWidth>d,t=window.outerHeight-window.innerHeight>d,o=e?"vertical":"horizontal";t&&e||!(window.Firebug&&window.Firebug.chrome&&window.Firebug.chrome.isInitialized||e||t)?(i.isOpen&&u(!1),i.isOpen=!1,i.orientation=void 0):(i.isOpen&&i.orientation===o||u(!0),i.isOpen=!0,i.orientation=o)},1e3)}(e)}}}}e(document).ready(function(){var t=0;null!=M.cfg.contextid&&(t=M.cfg.contextid),s.SETTINGS(t).done(function(t){var i,d=JSON.parse(t);c=d.strings,h(e("body"),d.settings),i=d.showsupport,d.context,1==i&&n.create({type:n.types.DEFAULT,title:c.supporttitle,body:a.render("local_disablerightclick/support_modal",{})},e("#create-modal")).done(function(t){t.getRoot(),t.show(),e("body").on("click","[data-action-disablerightclick]",function(){s.SUPPORT(e(this).data("value")),t.destroy()})}).fail(o.exception),setInterval(function(){0!=e("iframe").length&&e("iframe:not(.applied-disablement)").each(function(t,o){e(this).addClass("applied-disablement"),h(e(o.contentWindow.document.body),d.settings)})},1e3)}).fail(o.exception)})}}});